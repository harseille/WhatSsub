"use strict";(self.webpackChunkwhatssub=self.webpackChunkwhatssub||[]).push([[306],{9167:(n,t,e)=>{e.d(t,{Hm:()=>r.Z,kO:()=>a,aM:()=>c.Z}),e(6247);var r=e(160),o=e(6257),i=e(6566);const a=function(n,t,e){return r=void 0,a=void 0,u=function(){return function(n,t){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,o.pl)((0,o.JU)((0,o.hJ)(i.db,n),t),e)];case 1:return[2,r.sent()];case 2:return r.sent(),console.log("db set 실패"),[3,3];case 3:return[2]}}))},new((c=void 0)||(c=Promise))((function(n,t){function e(n){try{i(u.next(n))}catch(n){t(n)}}function o(n){try{i(u.throw(n))}catch(n){t(n)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof c?r:new c((function(n){n(r)}))).then(e,o)}i((u=u.apply(r,a||[])).next())}));var r,a,c,u};var c=e(4583)},850:(n,t,e)=>{e.d(t,{Z:()=>p});var r=e(7294);const o=e.p+"images/d9b0d565a25869d2659e.svg",i=e.p+"images/997e5c53f3f26877a000.svg";var a,c,u=e(932),l=e(4625),s=e(3519),d=u.Z.button(f||(a=["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  border: none;\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n  background: url(",") no-repeat center;\n  background-color: #ffe8e0;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #f7a9a9a3;\n    box-shadow: 3px 3px 3px #7879706d;\n  }\n\n  "," {\n    width: ",";\n    height: ",";\n  }\n"],c=["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  border: none;\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n  background: url(",") no-repeat center;\n  background-color: #ffe8e0;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #f7a9a9a3;\n    box-shadow: 3px 3px 3px #7879706d;\n  }\n\n  "," {\n    width: ",";\n    height: ",";\n  }\n"],Object.defineProperty?Object.defineProperty(a,"raw",{value:c}):a.raw=c,f=a),(0,l.bu)(34),(0,l.bu)(34),(function(n){return n.isLiked?i:o}),s.Z,(0,l.bu)(48),(0,l.bu)(48));const p=(0,r.memo)(d,(function(n,t){return n.isLiked===t.isLiked}));var f},1624:(n,t,e)=>{e.r(t),e.d(t,{default:()=>ln});var r=e(5944),o=e(3758),i=e(7294),a=e(9250),c=e(4480),u=e(3915),l=e(3854),s=e(6247),d=e(6257),p=e(6566),f=function(){return f=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},f.apply(this,arguments)};const b=function(n){return t=void 0,e=void 0,o=function(){var t,e;return function(n,t){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,(0,s.Z)((0,d.IO)((0,d.hJ)(p.db,"꿀조합"),(0,d.Xo)(n,"desc")))];case 1:return t=r.sent(),e=[],[4,t.forEach((function(n){e.push(f({id:n.id},JSON.parse(JSON.stringify(n.data()))))}))];case 2:return r.sent(),[2,e];case 3:return r.sent(),console.log("실패"),[3,4];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(n,i){function a(n){try{u(o.next(n))}catch(n){i(n)}}function c(n){try{u(o.throw(n))}catch(n){i(n)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(n){n(e)}))).then(a,c)}u((o=o.apply(t,e||[])).next())}));var t,e,r,o};var h=e(932),v=e(4625),x=e(3519),y=function(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n},g=function(){return g=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},g.apply(this,arguments)};const w=(0,i.memo)((function(n){var t=n.isSelectedTab,e=n.onClick,o=(0,c.sJ)(u.K);return(0,r.BX)(Z,{children:[(0,r.BX)(O,g({onClick:e,isSelectedTab:t},{children:[(0,r.tZ)("span",{children:null==o?void 0:o.displayName}),"만의 꿀조합"]})),(0,r.tZ)(O,g({onClick:e,isSelectedTab:!t},{children:"좋아요 꿀조합"}))]})}));var m,k,Z=h.Z.div(m||(m=y(["\n  display: flex;\n  gap: 15px;\n  "," {\n    width: 100%;\n    margin-top: 40px;\n  }\n"],["\n  display: flex;\n  gap: 15px;\n  "," {\n    width: 100%;\n    margin-top: 40px;\n  }\n"])),x.Z),O=h.Z.button(k||(k=y(["\n  border: none;\n  background-color: transparent;\n  font-size: ",";\n  font-weight: bold;\n  color: ",";\n  border-radius: 5px;\n  cursor: pointer;\n  "," {\n    font-size: ",";\n  }\n"],["\n  border: none;\n  background-color: transparent;\n  font-size: ",";\n  font-weight: bold;\n  color: ",";\n  border-radius: 5px;\n  cursor: pointer;\n  "," {\n    font-size: ",";\n  }\n"])),(0,v.bu)(16),(function(n){var t=n.isSelectedTab,e=n.theme;return t?e.colors.black25:e.colors.black6b}),x.Z,(0,v.bu)(20)),C=e(9655),S=e(9929),P=e(2381),j=function(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n},T=function(){return T=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},T.apply(this,arguments)};const J=function(n){var t=n.userCombination,e=n.onClick;return(0,r.tZ)("ul",{children:null==t?void 0:t.map((function(n){return(0,r.BX)(N,T({id:n.id},{children:[(0,r.tZ)(_,T({onClick:e.bind(null,n.id),"aria-label":"닫기 버튼"},{children:(0,r.tZ)("img",{className:"close-btn",src:P,alt:"삭제 아이콘"})})),(0,r.tZ)(C.rU,T({to:"/best-combination/".concat(n.id)},{children:(0,r.tZ)(S.Z,{sandwich:n})}))]}),n.꿀조합제목)}))})};var z,B,N=h.Z.li(z||(z=j(["\n  box-sizing: border-box;\n  padding: 20px 35px;\n  width: 100%;\n  box-shadow: 0px 4px 5px 3px rgba(194, 194, 194, 0.5);\n  border-radius: 15px;\n  margin: 20px auto 0;\n  position: relative;\n  transition: transform 0.3s ease;\n\n  &:hover {\n    transform: translate3d(-5px, -5px, 0);\n  }\n\n  &.delete {\n    background: #e4e4e4;\n  }\n"],["\n  box-sizing: border-box;\n  padding: 20px 35px;\n  width: 100%;\n  box-shadow: 0px 4px 5px 3px rgba(194, 194, 194, 0.5);\n  border-radius: 15px;\n  margin: 20px auto 0;\n  position: relative;\n  transition: transform 0.3s ease;\n\n  &:hover {\n    transform: translate3d(-5px, -5px, 0);\n  }\n\n  &.delete {\n    background: #e4e4e4;\n  }\n"]))),_=h.Z.button(B||(B=j(["\n  position: absolute;\n  top: 20px;\n  right: 15px;\n  border: none;\n  background-color: transparent;\n  margin-right: 5px;\n  cursor: pointer;\n  .close-btn {\n    filter: opacity(0.5) drop-shadow(0 0 0 #505050);\n    &:hover {\n      filter: opacity(0.5) drop-shadow(0 0 0 #0b0b0b);\n    }\n  }\n"],["\n  position: absolute;\n  top: 20px;\n  right: 15px;\n  border: none;\n  background-color: transparent;\n  margin-right: 5px;\n  cursor: pointer;\n  .close-btn {\n    filter: opacity(0.5) drop-shadow(0 0 0 #505050);\n    &:hover {\n      filter: opacity(0.5) drop-shadow(0 0 0 #0b0b0b);\n    }\n  }\n"]))),E=e(4316),X=e(4924),K=e(9167),L=e(850),M=function(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n},U=function(){return U=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},U.apply(this,arguments)},G=function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,i=e.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a},H=function(n,t,e){if(e||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))};const A=function(n){var t=n.id,e=n.imgUrl,o=n.sandwich,l=(0,c.sJ)(u.K),s=G((0,c.FV)(E.Z),2),d=s[0],p=s[1],f=(0,X.Z)(t),b=f.클릭핸들러_좋아요_토글,h=f.좋아요한샌드위치,v=f.좋아요한샌드위치_수정,x=(0,a.s0)();return(0,i.useEffect)((function(){}),[]),(0,r.tZ)("div",{children:(0,r.BX)(F,U({className:d.includes(o.id)?"delete":"",id:t},{children:[(0,r.tZ)(L.Z,{onClick:function(n){var t=n.target.closest("li");h.includes(t.id)&&!d.includes(t.id)?((0,K.aM)("좋아요",l.uid,{좋아요_리스트:h.filter((function(n){return n!==t.id}))}),p((function(n){return H(H([],G(n),!1),[t.id],!1)}))):((0,K.aM)("좋아요",l.uid,{좋아요_리스트:H([],G(h),!1)}),p((function(n){return n.filter((function(n){return n!==t.id}))}))),b("pending",n)},isLiked:!d.includes(o.id)}),(0,r.tZ)(I,U({onClick:function(){x(e),d&&(v((function(n){return n.filter((function(n){return!d.includes(n)}))})),p([]))}},{children:(0,r.tZ)(S.Z,{sandwich:o})}))]}))})};var D,Q,F=h.Z.li(D||(D=M(["\n  box-sizing: border-box;\n  padding: 20px 35px;\n  width: 100%;\n  box-shadow: 0px 4px 5px 3px rgba(194, 194, 194, 0.5);\n  border-radius: 15px;\n  margin: 20px auto 0;\n  position: relative;\n  transition: transform 0.3s ease;\n\n  &.delete {\n    background: #e4e4e4;\n  }\n\n  &:hover {\n    transform: translate3d(-5px, -5px, 0);\n  }\n"],["\n  box-sizing: border-box;\n  padding: 20px 35px;\n  width: 100%;\n  box-shadow: 0px 4px 5px 3px rgba(194, 194, 194, 0.5);\n  border-radius: 15px;\n  margin: 20px auto 0;\n  position: relative;\n  transition: transform 0.3s ease;\n\n  &.delete {\n    background: #e4e4e4;\n  }\n\n  &:hover {\n    transform: translate3d(-5px, -5px, 0);\n  }\n"]))),I=h.Z.button(Q||(Q=M(["\n  border: none;\n  background-color: transparent;\n  text-align: left;\n"],["\n  border: none;\n  background-color: transparent;\n  text-align: left;\n"])));const R=function(n){var t=n.likeCombination;return(0,r.tZ)("ul",{children:null==t?void 0:t.sort((function(n,t){return+t.좋아요-+n.좋아요})).map((function(n){return(0,r.tZ)(A,{id:n.id,imgUrl:"/best-combination/".concat(n.id),sandwich:n},n.꿀조합제목)}))})};const V=(0,i.memo)((function(n){var t=n.isSelectedTab,e=n.userCombinationList,o=n.onClick,i=(0,c.sJ)(u.K),a=(0,c.sJ)(l.K),s=t?e.filter((function(n){return n.작성자id===(null==i?void 0:i.uid)})):e.filter((function(n){return a.includes(n.id)}));return(0,r.tZ)($,{children:t?(0,r.tZ)(J,{userCombination:s,onClick:o}):(0,r.tZ)(R,{likeCombination:s})})}));var Y,q,W,$=h.Z.div(Y||(q=["\n  margin-bottom: 10px;\n"],W=["\n  margin-bottom: 10px;\n"],Object.defineProperty?Object.defineProperty(q,"raw",{value:W}):q.raw=W,Y=q)),nn=e(7189),tn=e(3579),en=function(n,t,e,r){return new(e||(e=Promise))((function(o,i){function a(n){try{u(r.next(n))}catch(n){i(n)}}function c(n){try{u(r.throw(n))}catch(n){i(n)}}function u(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}u((r=r.apply(n,t||[])).next())}))},rn=function(n,t){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},on=function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,i=e.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a};const an=function(){var n=this,t=(0,c.sJ)(u.n),e=on((0,i.useState)(null),2),o=e[0],s=e[1],f=on((0,i.useState)([]),2),h=f[0],v=f[1],x=(0,c.sJ)(u.K),y=(0,c.Zl)(l.K),g=(0,a.s0)(),m="좋아요한꿀조합"!==(0,a.TH)().state,k=(0,tn.Z)(o),Z=k.꿀조합_삭제하기,O=k.모달_토글하기,C=k.isShowModal;(0,i.useEffect)((function(){t?(en(n,void 0,void 0,(function(){var n,t;return rn(this,(function(e){switch(e.label){case 0:return x?[4,(0,d.QT)((0,d.JU)((0,d.hJ)(p.db,"좋아요"),x.uid))]:[3,2];case 1:n=e.sent(),t=n.data().좋아요_리스트,y(t),e.label=2;case 2:return[2]}}))})),v([]),P(m)):(alert("로그인 먼저"),g("/login"))}),[t,g,m]);var S=(0,i.useCallback)((function(n){var t;(null===(t=n.target.textContent)||void 0===t?void 0:t.includes("".concat(null==x?void 0:x.displayName)))?g("/MyPage?currentTab=".concat(null==x?void 0:x.displayName,"만의꿀조합"),{state:"".concat(null==x?void 0:x.displayName,"만의 조합")}):g("/MyPage?currentTab=좋아요한꿀조합",{state:"좋아요한꿀조합"})}),[x]),P=(0,i.useCallback)((function(t){return en(n,void 0,void 0,(function(){var n;return rn(this,(function(e){switch(e.label){case 0:return[4,b(t?"작성일":"좋아요")];case 1:return(n=e.sent())&&v(n),[2]}}))}))}),[h,m]),j=(0,i.useCallback)((function(n){s(n),O()}),[]);return(0,r.BX)(r.HY,{children:[C&&(0,r.tZ)(nn.Z,{title:"🚨 좋아요 누른 꿀조합이 사라져요 🚨",message:"정말로 삭제하시겠습니까?",onEvent:function(){try{Z();var n=h.filter((function(n){return n.id!==o}));v(n)}catch(n){console.log("삭제 실패")}},onClose:O,isConfirm:"삭제",eventButtonDesignType:"primaryRed",cancelButtonDesignType:"normal"}),(0,r.BX)(un,{children:[(0,r.tZ)(w,{isSelectedTab:m,onClick:S}),(0,r.tZ)(V,{isSelectedTab:m,userCombinationList:h,onClick:j})]})]})};var cn,un=h.Z.div(cn||(cn=function(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}(["\n  ",";\n  padding: 25px 70px;\n\n  "," {\n    max-width: 751px;\n    margin: 0 auto;\n    padding: 0 0 50px;\n  }\n"],["\n  ",";\n  padding: 25px 70px;\n\n  "," {\n    max-width: 751px;\n    margin: 0 auto;\n    padding: 0 0 50px;\n  }\n"])),(0,v.GQ)("column","center","center"),x.Z);const ln=function(){return(0,r.tZ)(o.Z,{children:(0,r.tZ)(an,{})})}},2381:(n,t,e)=>{n.exports=e.p+"images/15ae2249b992a343e456.png"}}]);