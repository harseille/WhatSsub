"use strict";(self.webpackChunkwhatssub=self.webpackChunkwhatssub||[]).push([[723],{2723:(n,t,e)=>{e.r(t),e.d(t,{default:()=>on});var r=e(5944),o=e(9250),i=e(4480),a=e(3915),c=e(7294),u=e(932),l=e(4625);const s=function(n){var t=(Date.now()-n)/1e3;if(t<60)return"방금 전";var e=t/60;if(e<60)return"".concat(Math.floor(e),"분 전");var r=e/60;if(r<24)return"".concat(Math.floor(r),"시간 전");var o=r/24;if(o<7)return"".concat(Math.floor(o),"일 전");var i=o/7;if(i<5)return"".concat(Math.floor(i),"주 전");var a=o/30;if(a<12)return"".concat(Math.floor(a),"개월 전");var c=o/365;return"".concat(Math.floor(c),"년 전")};var f=function(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n};const d=(0,c.memo)((function(n){var t=n.comment,e=t.author,o=t.authorProfileImg,i=t.content,a=t.createdAt;return(0,r.BX)(x,{children:[(0,r.BX)(w,{children:[(0,r.tZ)(Z,{children:o&&(0,r.tZ)(k,{src:o})}),(0,r.tZ)(_,{children:e}),(0,r.tZ)(O,{children:s(a)})]}),(0,r.tZ)(j,{children:i})]})}));var h,p,b,g,v,y,m,x=u.Z.div(h||(h=f(["\n  padding-top: 8px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #eee;\n"],["\n  padding-top: 8px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #eee;\n"]))),w=u.Z.div(p||(p=f(["\n  margin-bottom: 20px;\n\n  &::after {\n    content: '';\n    display: block;\n    clear: both;\n  }\n"],["\n  margin-bottom: 20px;\n\n  &::after {\n    content: '';\n    display: block;\n    clear: both;\n  }\n"]))),Z=u.Z.div(b||(b=f(["\n  float: left;\n  margin-right: 8px;\n  background: #ccc;\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n"],["\n  float: left;\n  margin-right: 8px;\n  background: #ccc;\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n"])),(0,l.bu)(40),(0,l.bu)(40)),k=u.Z.img(g||(g=f(["\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n"],["\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n"])),(0,l.bu)(40),(0,l.bu)(40)),_=u.Z.div(v||(v=f(["\n  float: left;\n  width: ",";\n  margin: 2px 0;\n  font-size: ",";\n  font-weight: bold;\n  line-height: 1.25;\n"],["\n  float: left;\n  width: ",";\n  margin: 2px 0;\n  font-size: ",";\n  font-weight: bold;\n  line-height: 1.25;\n"])),"calc(100% - ".concat((0,l.bu)(48),")"),(0,l.bu)(16)),O=u.Z.span(y||(y=f(["\n  float: left;\n  width: ",";\n  font-size: ",";\n  line-height: 1.25;\n  color: #979797;\n"],["\n  float: left;\n  width: ",";\n  font-size: ",";\n  line-height: 1.25;\n  color: #979797;\n"])),"calc(100% - ".concat((0,l.bu)(48),")"),(0,l.bu)(12)),j=u.Z.div(m||(m=f(["\n  font-size: ",";\n  line-height: 1.25;\n"],["\n  font-size: ",";\n  line-height: 1.25;\n"])),(0,l.bu)(14)),C=function(){return C=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},C.apply(this,arguments)};const S=function(n){var t=n.commentList,e=(n.commentsCount,n.target),o=t.map((function(n,o){return(0,r.tZ)("li",C({ref:o===t.length-1?e:null},{children:(0,r.tZ)(d,{comment:n})}),n.댓글id)}));return(0,r.tZ)("ul",{children:o})};var I=e(160);const P=function(n){return t=void 0,e=void 0,o=function(){return function(n,t){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,I.Z)("댓글_꿀조합",{bestCombinationId:n.꿀조합id,authorId:n.작성자id,author:n.작성자이름,authorProfileImg:n.작성자프로필이미지,content:n.내용,createdAt:n.작성일})];case 1:return t.sent(),[3,3];case 2:return t.sent(),console.log("댓글쓰기 실패"),[3,3];case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(n,i){function a(n){try{u(o.next(n))}catch(n){i(n)}}function c(n){try{u(o.throw(n))}catch(n){i(n)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(n){n(e)}))).then(a,c)}u((o=o.apply(t,e||[])).next())}));var t,e,r,o};var z=e(3519),X=e(994),A=function(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n},B=function(){return B=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},B.apply(this,arguments)};const J=(0,c.memo)((function(n){var t=this,e=n.getCommentListCount,u=(0,c.useRef)(null),l=(0,o.UO)().combinationId,s=(0,i.sJ)(a.K);return(0,r.BX)(G,{children:[(0,r.tZ)(T,{children:s&&(0,r.tZ)(U,{src:s.photoURL,alt:s.displayName})}),(0,r.BX)(Q,B({onSubmit:function(n){return r=t,o=void 0,a=function(){var t,r,o,i,a;return function(n,t){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(c){switch(c.label){case 0:return n.preventDefault(),t=null===(i=u.current)||void 0===i?void 0:i.value,s?[3,1]:(alert("로그인 후 댓글을 작성할 수 있습니다."),[3,7]);case 1:return t?[3,2]:(alert("댓글을 입력해주세요."),[3,7]);case 2:if(!(s&&t&&l))return[3,7];r={꿀조합id:l,작성자id:s.uid,작성자이름:s.displayName,작성자프로필이미지:s.photoURL,내용:null===(a=u.current)||void 0===a?void 0:a.value,작성일:Date.now()},c.label=3;case 3:return c.trys.push([3,6,,7]),[4,P(r)];case 4:return c.sent(),[4,e(l)];case 5:return c.sent(),u.current.value="",[3,7];case 6:return o=c.sent(),console.error(o),[3,7];case 7:return[2]}}))},new((i=void 0)||(i=Promise))((function(n,t){function e(n){try{u(a.next(n))}catch(n){t(n)}}function c(n){try{u(a.throw(n))}catch(n){t(n)}}function u(t){var r;t.done?n(t.value):(r=t.value,r instanceof i?r:new i((function(n){n(r)}))).then(e,c)}u((a=a.apply(r,o||[])).next())}));var r,o,i,a}},{children:[(0,r.tZ)(Y,{id:"comment",maxLength:120,ref:u}),(0,r.tZ)(K,{type:"submit",value:"게시"})]}))]})}));var L,R,D,M,N,E,G=u.Z.div(L||(L=A(["\n  width: 100%;\n  padding: 20px;\n  margin-bottom: 16px;\n  background: #ffffff;\n  display: flex;\n  align-items: center;\n  /* box-shadow: 0px -4px 10px rgba(213, 213, 213, 0.25), 0px 4px 10px rgba(213, 213, 213, 0.25);*/\n  border-bottom: 1px solid ",";\n\n  "," {\n    justify-content: center;\n    height: ",";\n  }\n"],["\n  width: 100%;\n  padding: 20px;\n  margin-bottom: 16px;\n  background: #ffffff;\n  display: flex;\n  align-items: center;\n  /* box-shadow: 0px -4px 10px rgba(213, 213, 213, 0.25), 0px 4px 10px rgba(213, 213, 213, 0.25);*/\n  border-bottom: 1px solid ",";\n\n  "," {\n    justify-content: center;\n    height: ",";\n  }\n"])),X.Z.colors.grayDDD,z.Z,(0,l.bu)(80)),T=u.Z.div(R||(R=A(["\n  display: none;\n  width: ",";\n  height: ",";\n  border-radius: 50%;\n  background: #ccc;\n\n  "," {\n    display: block;\n    width: ",";\n    height: ",";\n  }\n"],["\n  display: none;\n  width: ",";\n  height: ",";\n  border-radius: 50%;\n  background: #ccc;\n\n  "," {\n    display: block;\n    width: ",";\n    height: ",";\n  }\n"])),(0,l.bu)(30),(0,l.bu)(30),z.Z,(0,l.bu)(48),(0,l.bu)(48)),U=u.Z.img(D||(D=A(["\n  border-radius: 50%;\n  background: #ccc;\n"],["\n  border-radius: 50%;\n  background: #ccc;\n"]))),Q=u.Z.form(M||(M=A(["\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  gap: 10px;\n  width: 100%;\n  "," {\n    max-width: ",";\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  gap: 10px;\n  width: 100%;\n  "," {\n    max-width: ",";\n  }\n"])),z.Z,(0,l.bu)(1200)),Y=u.Z.input(N||(N=A(["\n  flex-shrink: 0;\n  flex-basis: 100%;\n  border: 0;\n  padding: 13px;\n  border-radius: 6px;\n  background: #f5f5f5;\n  font-size: ",";\n\n  "," {\n    flex-basis: ",";\n  }\n"],["\n  flex-shrink: 0;\n  flex-basis: 100%;\n  border: 0;\n  padding: 13px;\n  border-radius: 6px;\n  background: #f5f5f5;\n  font-size: ",";\n\n  "," {\n    flex-basis: ",";\n  }\n"])),(0,l.bu)(14),z.Z,"calc(100% - ".concat((0,l.bu)(80),")")),K=u.Z.input(E||(E=A(["\n  border: 0;\n  flex-basis: ",";\n  flex-shrink: 0;\n  background: transparent;\n  color: ",";\n  font-size: ",";\n  font-weight: bold;\n"],["\n  border: 0;\n  flex-basis: ",";\n  flex-shrink: 0;\n  background: transparent;\n  color: ",";\n  font-size: ",";\n  font-weight: bold;\n"])),(0,l.bu)(40),(function(n){return n.theme.colors.primaryBlue}),(0,l.bu)(14)),q=e(6257),F=e(6247),H=e(7547),V=e(6566),W=function(){return W=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},W.apply(this,arguments)},$=function(n,t,e,r){return new(e||(e=Promise))((function(o,i){function a(n){try{u(r.next(n))}catch(n){i(n)}}function c(n){try{u(r.throw(n))}catch(n){i(n)}}function u(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}u((r=r.apply(n,t||[])).next())}))},nn=function(n,t){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},tn=function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,i=e.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a},en=function(n,t,e){if(e||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))};var rn=function(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n};const on=function(){var n=function(n){var t=tn((0,c.useState)(0),2),e=t[0],r=t[1],o=tn((0,c.useState)([]),2),i=o[0],a=o[1],u=(0,c.useRef)(null),l=(0,q.hJ)(V.db,"댓글_꿀조합"),s={댓글_수_가져오기:(0,q.IO)(l,(0,q.ar)("bestCombinationId","==",n)),최신_댓글_가져오기:(0,q.IO)(l,(0,q.ar)("bestCombinationId","==",n),(0,q.Xo)("createdAt","desc"),(0,q.b9)(1)),초기_댓글_목록_가져오기:(0,q.IO)(l,(0,q.ar)("bestCombinationId","==",n),(0,q.Xo)("createdAt","desc"),(0,q.b9)(5)),스크롤_댓글_목록_가져오기:(0,q.IO)(l,(0,q.ar)("bestCombinationId","==",n),(0,q.Xo)("createdAt","desc"),(0,q.TQ)(u.current),(0,q.b9)(5))},f=function(n){return $(void 0,void 0,void 0,(function(){var n,t;return nn(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,q.Yp)(s.댓글_수_가져오기)];case 1:return n=e.sent(),r(n.data().count),[3,3];case 2:return t=e.sent(),console.error(t),console.log("댓글 수 가져오기 실패"),[3,3];case 3:return[2]}}))}))},d=(0,H.Z)(function(n){return $(void 0,void 0,void 0,(function(){var n,t,e,r,o;return nn(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),u.current?[3,2]:[4,(0,F.Z)(s.초기_댓글_목록_가져오기)];case 1:return t=i.sent(),[3,4];case 2:return[4,(0,F.Z)(s.스크롤_댓글_목록_가져오기)];case 3:t=i.sent(),i.label=4;case 4:return e=[],(n=t).forEach((function(n){e.push(W({댓글id:n.id},JSON.parse(JSON.stringify(n.data()))))})),u.current=null!==(o=n.docs[n.docs.length-1])&&void 0!==o?o:null,a((function(n){return en(en([],tn(n),!1),tn(e),!1)})),[3,6];case 5:return r=i.sent(),console.error(r),console.log("댓글읽기 실패"),[3,6];case 6:return[2]}}))}))}.bind(null,n),i.length,s.댓글_수_가져오기).listRef;return(0,c.useEffect)((function(){n&&(f(),$(void 0,void 0,void 0,(function(){var n;return nn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,q.cf)(s.최신_댓글_가져오기,(function(n){if(!n.empty){var t=n.docs.map((function(n){return W({댓글id:n.id},JSON.parse(JSON.stringify(n.data())))}));f(),u.current=n.docs[n.docs.length-1],a((function(n){return 0===n.length?t:en(en([],tn(t),!1),tn(n),!1)}))}}))];case 1:return t.sent(),[3,3];case 2:return n=t.sent(),console.error(n),console.log("댓글읽기 실패"),[3,3];case 3:return[2]}}))})))}),[n]),{comments:i,commentsCount:e,listRef:d,댓글_수_가져오기:f}}((0,o.UO)().combinationId),t=n.comments,e=n.commentsCount,u=n.listRef,l=n.댓글_수_가져오기,s=(0,i.sJ)(a.n);return(0,r.BX)(un,{children:[(0,r.tZ)(ln,{children:(0,r.BX)("h2",{children:["리뷰 ",(0,r.tZ)("span",{children:e})]})}),s&&(0,r.tZ)(J,{getCommentListCount:l}),0!==t.length&&(0,r.tZ)(S,{commentList:t,commentsCount:e,target:u})]})};var an,cn,un=u.Z.div(an||(an=rn(["\n  background: #fff;\n  padding: 0 32px;\n  padding-bottom: ",";\n  box-shadow: 0px -4px 10px rgba(213, 213, 213, 0.25);\n\n  "," {\n    padding-bottom: ",";\n  }\n"],["\n  background: #fff;\n  padding: 0 32px;\n  padding-bottom: ",";\n  box-shadow: 0px -4px 10px rgba(213, 213, 213, 0.25);\n\n  "," {\n    padding-bottom: ",";\n  }\n"])),(0,l.bu)(60),z.Z,(0,l.bu)(80)),ln=u.Z.div(cn||(cn=rn(["\n  ","\n  height: ",";\n\n  box-shadow: 0px 1px 1px #eee;\n\n  & h2 {\n    font-weight: 500;\n    font-size: ",";\n\n    & span {\n      color: ",";\n    }\n  }\n"],["\n  ","\n  height: ",";\n\n  box-shadow: 0px 1px 1px #eee;\n\n  & h2 {\n    font-weight: 500;\n    font-size: ",";\n\n    & span {\n      color: ",";\n    }\n  }\n"])),(0,l.GQ)("row",void 0,"center"),(0,l.bu)(60),(0,l.bu)(14),(function(n){return n.theme.colors.primaryYellow}))}}]);