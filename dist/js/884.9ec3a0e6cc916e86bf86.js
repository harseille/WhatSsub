"use strict";(self.webpackChunkwhatssub=self.webpackChunkwhatssub||[]).push([[884],{9167:(n,e,t)=>{t.d(e,{Hm:()=>r.Z,kO:()=>a,aM:()=>c.Z}),t(6247);var r=t(160),o=t(6257),i=t(6566);const a=function(n,e,t){return r=void 0,a=void 0,u=function(){return function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(n,a)}catch(n){i=[6,n],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,o.pl)((0,o.JU)((0,o.hJ)(i.db,n),e),t)];case 1:return[2,r.sent()];case 2:return r.sent(),console.log("db set 실패"),[3,3];case 3:return[2]}}))},new((c=void 0)||(c=Promise))((function(n,e){function t(n){try{i(u.next(n))}catch(n){e(n)}}function o(n){try{i(u.throw(n))}catch(n){e(n)}}function i(e){var r;e.done?n(e.value):(r=e.value,r instanceof c?r:new c((function(n){n(r)}))).then(t,o)}i((u=u.apply(r,a||[])).next())}));var r,a,c,u};var c=t(4583)},850:(n,e,t)=>{t.d(e,{Z:()=>p});var r=t(7294);const o=t.p+"images/d9b0d565a25869d2659e.svg",i=t.p+"images/997e5c53f3f26877a000.svg";var a,c,u=t(932),l=t(4625),s=t(3519),d=u.Z.button(f||(a=["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  border: none;\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n  background: url(",") no-repeat center;\n  background-color: #ffe8e0;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #f7a9a9a3;\n    box-shadow: 3px 3px 3px #7879706d;\n  }\n\n  "," {\n    width: ",";\n    height: ",";\n  }\n"],c=["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  border: none;\n  border-radius: 50%;\n  width: ",";\n  height: ",";\n  background: url(",") no-repeat center;\n  background-color: #ffe8e0;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #f7a9a9a3;\n    box-shadow: 3px 3px 3px #7879706d;\n  }\n\n  "," {\n    width: ",";\n    height: ",";\n  }\n"],Object.defineProperty?Object.defineProperty(a,"raw",{value:c}):a.raw=c,f=a),(0,l.bu)(34),(0,l.bu)(34),(function(n){return n.isLiked?i:o}),s.Z,(0,l.bu)(48),(0,l.bu)(48));const p=(0,r.memo)(d,(function(n,e){return n.isLiked===e.isLiked}));var f},1662:(n,e,t)=>{t.r(e),t.d(e,{default:()=>ln});var r=t(5944),o=t(3758),i=t(7294),a=t(9250),c=t(4480),u=t(3915),l=t(3854),s=t(6247),d=t(6257),p=t(6566),f=function(){return f=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},f.apply(this,arguments)};const b=function(n){return e=void 0,t=void 0,o=function(){var e,t;return function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(n,a)}catch(n){i=[6,n],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,(0,s.Z)((0,d.IO)((0,d.hJ)(p.db,"꿀조합"),(0,d.Xo)(n,"desc")))];case 1:return e=r.sent(),t=[],[4,e.forEach((function(n){t.push(f({id:n.id},JSON.parse(JSON.stringify(n.data()))))}))];case 2:return r.sent(),[2,t];case 3:return r.sent(),console.log("실패"),[3,4];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(n,i){function a(n){try{u(o.next(n))}catch(n){i(n)}}function c(n){try{u(o.throw(n))}catch(n){i(n)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(n){n(t)}))).then(a,c)}u((o=o.apply(e,t||[])).next())}));var e,t,r,o};var h=t(932),v=t(4625),x=t(3519),y=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},g=function(){return g=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},g.apply(this,arguments)};const w=(0,i.memo)((function(n){var e=n.isSelectedTab,t=n.onClick,o=(0,c.sJ)(u.K);return(0,r.BX)(Z,{children:[(0,r.BX)(O,g({onClick:t,isSelectedTab:e},{children:[(0,r.tZ)("span",{children:null==o?void 0:o.displayName}),"만의 꿀조합"]})),(0,r.tZ)(O,g({onClick:t,isSelectedTab:!e},{children:"좋아요 꿀조합"}))]})}));var m,k,Z=h.Z.div(m||(m=y(["\n  display: flex;\n  gap: 15px;\n  "," {\n    width: 100%;\n    margin-top: 40px;\n  }\n"],["\n  display: flex;\n  gap: 15px;\n  "," {\n    width: 100%;\n    margin-top: 40px;\n  }\n"])),x.Z),O=h.Z.button(k||(k=y(["\n  border: none;\n  background-color: transparent;\n  font-size: ",";\n  font-weight: bold;\n  color: ",";\n  border-radius: 5px;\n  cursor: pointer;\n  "," {\n    font-size: ",";\n  }\n"],["\n  border: none;\n  background-color: transparent;\n  font-size: ",";\n  font-weight: bold;\n  color: ",";\n  border-radius: 5px;\n  cursor: pointer;\n  "," {\n    font-size: ",";\n  }\n"])),(0,v.bu)(16),(function(n){var e=n.isSelectedTab,t=n.theme;return e?t.colors.black25:t.colors.black6b}),x.Z,(0,v.bu)(20)),C=t(9655),S=t(9929),P=t(2381),j=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},T=function(){return T=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},T.apply(this,arguments)};const J=function(n){var e=n.userCombination,t=n.onClick;return(0,r.tZ)("ul",{children:null==e?void 0:e.map((function(n){return(0,r.BX)(N,T({id:n.id},{children:[(0,r.tZ)(_,T({onClick:t.bind(null,n.id),"aria-label":"닫기 버튼"},{children:(0,r.tZ)("img",{className:"close-btn",src:P,alt:"삭제 아이콘"})})),(0,r.tZ)(C.rU,T({to:"/best-combination/".concat(n.id)},{children:(0,r.tZ)(S.Z,{sandwich:n})}))]}),n.꿀조합제목)}))})};var z,B,N=h.Z.li(z||(z=j(["\n  box-sizing: border-box;\n  padding: 20px 35px;\n  width: 100%;\n  box-shadow: 0px 4px 5px 3px rgba(194, 194, 194, 0.5);\n  border-radius: 15px;\n  margin: 20px auto 0;\n  position: relative;\n  transition: transform 0.3s ease;\n\n  &:hover {\n    transform: translate3d(-5px, -5px, 0);\n  }\n\n  &.delete {\n    background: #e4e4e4;\n  }\n"],["\n  box-sizing: border-box;\n  padding: 20px 35px;\n  width: 100%;\n  box-shadow: 0px 4px 5px 3px rgba(194, 194, 194, 0.5);\n  border-radius: 15px;\n  margin: 20px auto 0;\n  position: relative;\n  transition: transform 0.3s ease;\n\n  &:hover {\n    transform: translate3d(-5px, -5px, 0);\n  }\n\n  &.delete {\n    background: #e4e4e4;\n  }\n"]))),_=h.Z.button(B||(B=j(["\n  position: absolute;\n  top: 20px;\n  right: 15px;\n  border: none;\n  background-color: transparent;\n  margin-right: 5px;\n  cursor: pointer;\n  .close-btn {\n    filter: opacity(0.5) drop-shadow(0 0 0 #505050);\n    &:hover {\n      filter: opacity(0.5) drop-shadow(0 0 0 #0b0b0b);\n    }\n  }\n"],["\n  position: absolute;\n  top: 20px;\n  right: 15px;\n  border: none;\n  background-color: transparent;\n  margin-right: 5px;\n  cursor: pointer;\n  .close-btn {\n    filter: opacity(0.5) drop-shadow(0 0 0 #505050);\n    &:hover {\n      filter: opacity(0.5) drop-shadow(0 0 0 #0b0b0b);\n    }\n  }\n"])));const X=(0,c.cn)({key:"delete",default:[]});var E=t(4924),K=t(9167),L=t(850),M=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},U=function(){return U=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},U.apply(this,arguments)},G=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var r,o,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a},H=function(n,e,t){if(t||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))};const A=function(n){var e=n.id,t=n.imgUrl,o=n.sandwich,i=(0,c.sJ)(u.K),l=G((0,c.FV)(X),2),s=l[0],d=l[1],p=(0,E.Z)(e),f=p.클릭핸들러_좋아요_토글,b=p.좋아요한샌드위치,h=p.좋아요한샌드위치_수정,v=(0,a.s0)();return(0,r.tZ)("div",{children:(0,r.BX)(F,U({className:s.includes(o.id)?"delete":"",id:e},{children:[(0,r.tZ)(L.Z,{onClick:function(n){var e=n.target.closest("li");b.includes(e.id)&&!s.includes(e.id)?((0,K.aM)("좋아요",i.uid,{좋아요_리스트:b.filter((function(n){return n!==e.id}))}),d((function(n){return H(H([],G(n),!1),[e.id],!1)}))):((0,K.aM)("좋아요",i.uid,{좋아요_리스트:H([],G(b),!1)}),d((function(n){return n.filter((function(n){return n!==e.id}))}))),f("pending",n)},isLiked:!s.includes(o.id)}),(0,r.tZ)(I,U({onClick:function(){v(t),s&&(h((function(n){return n.filter((function(n){return!s.includes(n)}))})),d([]))}},{children:(0,r.tZ)(S.Z,{sandwich:o})}))]}))})};var D,Q,F=h.Z.li(D||(D=M(["\n  box-sizing: border-box;\n  padding: 20px 35px;\n  width: 100%;\n  box-shadow: 0px 4px 5px 3px rgba(194, 194, 194, 0.5);\n  border-radius: 15px;\n  margin: 20px auto 0;\n  position: relative;\n  transition: transform 0.3s ease;\n\n  &.delete {\n    background: #e4e4e4;\n  }\n\n  &:hover {\n    transform: translate3d(-5px, -5px, 0);\n  }\n"],["\n  box-sizing: border-box;\n  padding: 20px 35px;\n  width: 100%;\n  box-shadow: 0px 4px 5px 3px rgba(194, 194, 194, 0.5);\n  border-radius: 15px;\n  margin: 20px auto 0;\n  position: relative;\n  transition: transform 0.3s ease;\n\n  &.delete {\n    background: #e4e4e4;\n  }\n\n  &:hover {\n    transform: translate3d(-5px, -5px, 0);\n  }\n"]))),I=h.Z.button(Q||(Q=M(["\n  border: none;\n  background-color: transparent;\n  text-align: left;\n"],["\n  border: none;\n  background-color: transparent;\n  text-align: left;\n"])));const R=function(n){var e=n.likeCombination;return(0,r.tZ)("ul",{children:null==e?void 0:e.sort((function(n,e){return+e.좋아요-+n.좋아요})).map((function(n){return(0,r.tZ)(A,{id:n.id,imgUrl:"/best-combination/".concat(n.id),sandwich:n},n.꿀조합제목)}))})};const V=(0,i.memo)((function(n){var e=n.isSelectedTab,t=n.userCombinationList,o=n.onClick,i=(0,c.sJ)(u.K),a=(0,c.sJ)(l.K),s=e?t.filter((function(n){return n.작성자id===(null==i?void 0:i.uid)})):t.filter((function(n){return a.includes(n.id)}));return(0,r.tZ)($,{children:e?(0,r.tZ)(J,{userCombination:s,onClick:o}):(0,r.tZ)(R,{likeCombination:s})})}));var Y,q,W,$=h.Z.div(Y||(q=["\n  margin-bottom: 10px;\n"],W=["\n  margin-bottom: 10px;\n"],Object.defineProperty?Object.defineProperty(q,"raw",{value:W}):q.raw=W,Y=q)),nn=t(7189),en=t(3579),tn=function(n,e,t,r){return new(t||(t=Promise))((function(o,i){function a(n){try{u(r.next(n))}catch(n){i(n)}}function c(n){try{u(r.throw(n))}catch(n){i(n)}}function u(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,c)}u((r=r.apply(n,e||[])).next())}))},rn=function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(n,a)}catch(n){i=[6,n],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},on=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var r,o,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a};const an=function(){var n=this,e=(0,c.sJ)(u.n),t=on((0,i.useState)(null),2),o=t[0],s=t[1],f=on((0,i.useState)([]),2),h=f[0],v=f[1],x=(0,c.sJ)(u.K),y=(0,c.Zl)(l.K),g=(0,a.s0)(),m="좋아요한꿀조합"!==(0,a.TH)().state,k=(0,en.Z)(o),Z=k.꿀조합_삭제하기,O=k.모달_토글하기,C=k.isShowModal;(0,i.useEffect)((function(){e?(tn(n,void 0,void 0,(function(){var n,e;return rn(this,(function(t){switch(t.label){case 0:return x?[4,(0,d.QT)((0,d.JU)((0,d.hJ)(p.db,"좋아요"),x.uid))]:[3,2];case 1:n=t.sent(),e=n.data().좋아요_리스트,y(e),t.label=2;case 2:return[2]}}))})),v([]),P(m)):(alert("로그인 먼저"),g("/login"))}),[e,g,m]);var S=(0,i.useCallback)((function(n){var e;(null===(e=n.target.textContent)||void 0===e?void 0:e.includes("".concat(null==x?void 0:x.displayName)))?g("/MyPage?currentTab=".concat(null==x?void 0:x.displayName,"만의꿀조합"),{state:"".concat(null==x?void 0:x.displayName,"만의 조합")}):g("/MyPage?currentTab=좋아요한꿀조합",{state:"좋아요한꿀조합"})}),[x]),P=(0,i.useCallback)((function(e){return tn(n,void 0,void 0,(function(){var n;return rn(this,(function(t){switch(t.label){case 0:return[4,b(e?"작성일":"좋아요")];case 1:return(n=t.sent())&&v(n),[2]}}))}))}),[h,m]),j=(0,i.useCallback)((function(n){s(n),O()}),[]);return(0,r.BX)(r.HY,{children:[C&&(0,r.tZ)(nn.Z,{title:"🚨 좋아요 누른 꿀조합이 사라져요 🚨",message:"정말로 삭제하시겠습니까?",onEvent:function(){try{Z();var n=h.filter((function(n){return n.id!==o}));v(n)}catch(n){console.log("삭제 실패")}},onClose:O,isConfirm:"삭제",eventButtonDesignType:"primaryRed",cancelButtonDesignType:"normal"}),(0,r.BX)(un,{children:[(0,r.tZ)(w,{isSelectedTab:m,onClick:S}),(0,r.tZ)(V,{isSelectedTab:m,userCombinationList:h,onClick:j})]})]})};var cn,un=h.Z.div(cn||(cn=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}(["\n  ",";\n  padding: 25px 70px;\n\n  "," {\n    max-width: 751px;\n    margin: 0 auto;\n    padding: 0 0 50px;\n  }\n"],["\n  ",";\n  padding: 25px 70px;\n\n  "," {\n    max-width: 751px;\n    margin: 0 auto;\n    padding: 0 0 50px;\n  }\n"])),(0,v.GQ)("column","center","center"),x.Z);const ln=function(){return(0,r.tZ)(o.Z,{children:(0,r.tZ)(an,{})})}},2381:(n,e,t)=>{n.exports=t.p+"images/15ae2249b992a343e456.png"}}]);